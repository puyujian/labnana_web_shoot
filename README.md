# ğŸŒ é¦™è•‰å®éªŒå®¤ç‹¬ç«‹å‰ç«¯ (Banana Lab Web)

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ Banana Lab (ListenHub) AI å›¾ç‰‡ç”Ÿæˆå¹³å°ç‹¬ç«‹å‰ç«¯å·¥å…·ï¼Œæ”¯æŒå¤šè´¦æˆ·ç®¡ç†ã€æ‰¹é‡ç”Ÿæˆã€å›¾åº“ç®¡ç†ç­‰åŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ” è´¦æˆ·ç®¡ç†
- **è‡ªåŠ¨æ³¨å†Œ** - é›†æˆ MoEmail ä¸´æ—¶é‚®ç®±ï¼Œä¸€é”®è‡ªåŠ¨æ³¨å†Œæ–°è´¦æˆ·
- **æ‰‹åŠ¨æ³¨å†Œ** - å¯åŠ¨æµè§ˆå™¨æ— ç—•çª—å£ï¼Œæ‰‹åŠ¨å®Œæˆæ³¨å†Œ
- **Token å¯¼å…¥** - æ”¯æŒæ‰‹åŠ¨æ·»åŠ å·²æœ‰è´¦æˆ·çš„ Token
- **ç§¯åˆ†ç›‘æ§** - å®æ—¶æ˜¾ç¤ºå„è´¦æˆ·ç§¯åˆ†ä½™é¢
- **è‡ªåŠ¨ç­¾åˆ°** - æ¯æ—¥è‡ªåŠ¨ç­¾åˆ°è·å–ç§¯åˆ†
- **å¿ƒè·³ç³»ç»Ÿ** - å®šæ—¶åˆ·æ–°ç§¯åˆ†ã€è‡ªåŠ¨ç­¾åˆ°

### ğŸ¨ å›¾ç‰‡ç”Ÿæˆ
- **å•å¼ ç”Ÿæˆ** - å¿«é€Ÿç”Ÿæˆå•å¼ å›¾ç‰‡
- **æ‰¹é‡ç”Ÿæˆ** - æ”¯æŒæ‰¹é‡æäº¤ç”Ÿæˆä»»åŠ¡
- **å¹¶å‘ç”Ÿæˆ** - å¤šè´¦æˆ·å¹¶å‘ç”Ÿæˆï¼Œè‡ªåŠ¨è½®è¯¢
- **æ™ºèƒ½é€‰æ‹©** - è‡ªåŠ¨é€‰æ‹©ç§¯åˆ†å……è¶³çš„è´¦æˆ·
- **å‚æ•°é…ç½®** - æ”¯æŒç”»è´¨(1K/2K/4K)ã€æ¯”ä¾‹(1:1/3:4/4:3/16:9/9:16)
- **å›¾ç”Ÿå›¾** - æ”¯æŒä¸Šä¼ å‚è€ƒå›¾è¿›è¡Œç”Ÿæˆ

### ğŸ–¼ï¸ å›¾åº“ç®¡ç†
- **å›¾ç‰‡åˆ—è¡¨** - æŸ¥çœ‹æ‰€æœ‰è´¦æˆ·çš„ç”Ÿæˆå›¾ç‰‡
- **çŠ¶æ€æ˜¾ç¤º** - å®æ—¶æ˜¾ç¤ºç”ŸæˆçŠ¶æ€ï¼ˆæ’é˜Ÿä¸­/ç”Ÿæˆä¸­/å·²å®Œæˆ/å¤±è´¥ï¼‰
- **ç­›é€‰åŠŸèƒ½** - æŒ‰è´¦æˆ·ã€çŠ¶æ€ç­›é€‰å›¾ç‰‡
- **å›¾ç‰‡è¯¦æƒ…** - æŸ¥çœ‹æç¤ºè¯ã€å°ºå¯¸ã€æ¯”ä¾‹ã€å¯è§æ€§ç­‰ä¿¡æ¯
- **åŸå›¾ä¸‹è½½** - ä¸‹è½½é«˜æ¸…åŸå›¾ (PNG)
- **ç¼©ç•¥å›¾ä¸‹è½½** - ä¸‹è½½å‹ç¼©ç¼©ç•¥å›¾ (WebP)
- **æç®€æ¨¡å¼** - æä¾›æ— å¹²æ‰°çš„çº¯å›¾ç‰‡æµè§ˆæ¨¡å¼ï¼Œé€‚åˆå¿«é€ŸæŸ¥çœ‹å’Œè°ƒè¯•

### ğŸ’… ç•Œé¢ä½“éªŒ (New!)
- **ä¸»é¢˜åˆ‡æ¢** - æ”¯æŒæ·±è‰²/æµ…è‰²æ¨¡å¼ä¸€é”®åˆ‡æ¢ ğŸŒ™/â˜€ï¸
- **å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…æ‰‹æœºã€å¹³æ¿å’Œæ¡Œé¢ç«¯
- **è§†è§‰ä¼˜åŒ–** - æ›´å¤§çš„å­—ä½“ã€æ›´æ¸…æ™°çš„å¸ƒå±€ã€æµç•…çš„åŠ è½½åŠ¨ç”»
- **çŠ¶æ€åé¦ˆ** - ä¼˜åŒ–çš„å›¾ç‰‡ç”ŸæˆçŠ¶æ€å±•ç¤ºï¼ˆæ’é˜Ÿ/ç”Ÿæˆä¸­åŠ¨ç”»ï¼‰

### ğŸ”§ å…¶ä»–åŠŸèƒ½
- **æ²¹çŒ´è„šæœ¬** - Token è‡ªåŠ¨æŠ“å–åŒæ­¥è„šæœ¬
- **ä»£ç†ä¸‹è½½** - è§£å†³è·¨åŸŸä¸‹è½½é—®é¢˜
- **é…ç½®æŒä¹…åŒ–** - é…ç½®è‡ªåŠ¨ä¿å­˜

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### Windows ç”¨æˆ·
åŒå‡»è¿è¡Œ `start.bat` å³å¯ã€‚

### macOS / Linux ç”¨æˆ·
åœ¨ç»ˆç«¯è¿è¡Œï¼š
```bash
chmod +x start.sh
./start.sh
```

æœåŠ¡å¯åŠ¨åè®¿é—®: http://localhost:3000

## ğŸ“¦ æ‰‹åŠ¨å®‰è£…

### ç¯å¢ƒè¦æ±‚
- Node.js 18+
- npm æˆ– yarn

### å®‰è£…æ­¥éª¤

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd banana-web

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æœåŠ¡
npm start
```

## âš™ï¸ é…ç½®

### MoEmail é…ç½®ï¼ˆè‡ªåŠ¨æ³¨å†Œå¿…éœ€ï¼‰

åœ¨è®¾ç½®é¡µé¢é…ç½® MoEmail æœåŠ¡ï¼š

| é…ç½®é¡¹ | è¯´æ˜ |
|--------|------|
| API åœ°å€ | MoEmail æœåŠ¡åœ°å€ï¼Œå¦‚ `https://mail.example.com` |
| API Key | MoEmail API å¯†é’¥ |

### é…ç½®æ–‡ä»¶

é¡¹ç›®åŒ…å«ä¸€ä¸ª `config.json.example` ç¤ºä¾‹æ–‡ä»¶ã€‚è¯·å°†å…¶å¤åˆ¶ä¸º `config.json` å¹¶å¡«å…¥ä½ çš„é…ç½®ï¼š

```json
{
  "moemail": {
    "baseUrl": "https://mail.example.com",
    "apiKey": "your-api-key"
  },
  "fingerprint": {
    "browserPath": ""
  },
  "generation": {
    "defaultPrompt": "",
    "defaultSize": "2K",
    "defaultRatio": "1:1",
    "interval": 2000
  }
}
```

## ğŸ”‘ æ·»åŠ è´¦æˆ·

### æ–¹å¼ä¸€ï¼šè‡ªåŠ¨æ³¨å†Œï¼ˆæ¨èï¼‰

1. é…ç½® MoEmail æœåŠ¡
2. ç‚¹å‡»ã€ŒğŸ¤– è‡ªåŠ¨æ³¨å†Œã€æŒ‰é’®
3. ç­‰å¾…è‡ªåŠ¨å®Œæˆæ³¨å†Œã€éªŒè¯ã€ç­¾åˆ°

### æ–¹å¼äºŒï¼šæ²¹çŒ´è„šæœ¬åŒæ­¥ï¼ˆæ¨èæ‰‹åŠ¨ç™»å½•ç”¨æˆ·ï¼‰

1. å®‰è£… Tampermonkey æµè§ˆå™¨æ‰©å±•
2. æ‰“å¼€ `token-grabber.user.js` æ–‡ä»¶ï¼Œç‚¹å‡»å®‰è£…
3. ç™»å½• https://listenhub.ai æˆ– https://banana.listenhub.ai
4. é¡µé¢å³ä¸‹è§’ä¼šå‡ºç° ğŸŒ æŒ‰é’®
5. ç‚¹å‡»æŒ‰é’®ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ï¼š
   - è¯»å–ç™»å½• Cookie ä¸­çš„ Token
   - è·å–ç”¨æˆ·ä¿¡æ¯å’Œç§¯åˆ†
   - æ£€æŸ¥ç­¾åˆ°çŠ¶æ€
   - å‘é€åˆ°æœ¬åœ°æœåŠ¡å™¨åŒæ­¥

**è„šæœ¬åŠŸèƒ½ï¼š**
- âœ… è‡ªåŠ¨æ£€æµ‹ç™»å½•çŠ¶æ€
- âœ… è‡ªåŠ¨è§£ç  URL ç¼–ç çš„ Token
- âœ… è·å–çœŸå®ç§¯åˆ†ï¼ˆä½¿ç”¨ `/users/subscription` APIï¼‰
- âœ… æ˜¾ç¤ºç­¾åˆ°çŠ¶æ€
- âœ… ä¸€é”®åŒæ­¥åˆ°æœ¬åœ°æœåŠ¡

### æ–¹å¼ä¸‰ï¼šæ‰‹åŠ¨æ·»åŠ  Token

1. ç™»å½• https://banana.listenhub.ai
2. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
3. Application â†’ Cookies â†’ `app_access_token`
4. å¤åˆ¶ Token å€¼ï¼ˆå»æ‰ `Bearer%20` å‰ç¼€ï¼‰
5. åœ¨æœ¬å·¥å…·ç‚¹å‡»ã€ŒğŸ”‘ æ·»åŠ  Tokenã€

## ğŸ“¡ API æ¥å£

### ç³»ç»ŸçŠ¶æ€
```
GET /api/status
```

### è´¦æˆ·ç®¡ç†
```
GET    /api/accounts              # è·å–è´¦æˆ·åˆ—è¡¨
POST   /api/accounts/add          # æ·»åŠ è´¦æˆ·
POST   /api/accounts/auto-register # è‡ªåŠ¨æ³¨å†Œ
DELETE /api/accounts/:id          # åˆ é™¤è´¦æˆ·
POST   /api/accounts/:id/refresh  # åˆ·æ–°ç§¯åˆ†
POST   /api/accounts/:id/checkin  # ç­¾åˆ°
POST   /api/accounts/checkin-all  # å…¨éƒ¨ç­¾åˆ°
POST   /api/accounts/refresh-all  # åˆ·æ–°æ‰€æœ‰ç§¯åˆ†
```

### å›¾ç‰‡ç”Ÿæˆ
```
POST /api/generate       # å•å¼ ç”Ÿæˆ
POST /api/generate/batch # æ‰¹é‡ç”Ÿæˆ
```

### å¹¶å‘ä»»åŠ¡
```
POST /api/concurrent/start   # å¯åŠ¨å¹¶å‘ä»»åŠ¡
POST /api/concurrent/stop    # åœæ­¢å¹¶å‘ä»»åŠ¡
GET  /api/concurrent/status  # è·å–ä»»åŠ¡çŠ¶æ€
```

### å›¾åº“ç®¡ç†
```
GET  /api/images                    # è·å–å›¾ç‰‡åˆ—è¡¨
GET  /api/images/:id                # è·å–å›¾ç‰‡è¯¦æƒ…
GET  /api/accounts/:id/images       # è·å–è´¦æˆ·å›¾ç‰‡
POST /api/images/:id/refresh-url    # åˆ·æ–°å›¾ç‰‡URL
GET  /api/download?url=xxx          # ä»£ç†ä¸‹è½½
```

### è°ƒè¯•å·¥å…·
- **æç®€å›¾åº“**: è®¿é—® `/simple-gallery.html` å¯è¿›å…¥æç®€æ¨¡å¼ï¼Œç›´æ¥æŸ¥çœ‹æ‰€æœ‰è·å–åˆ°çš„å›¾ç‰‡ï¼Œç”¨äºæ’æŸ¥æ˜¾ç¤ºé—®é¢˜ã€‚

## ğŸ”Œ Banana Lab API å‚è€ƒ

### åŸºç¡€ç«¯ç‚¹
- ListenHub Auth: `https://listenhub.ai/api/listenhub/v1/`
- Banana API: `https://api.listenhub.ai/api/v1/banana/`
- Users API: `https://api.listenhub.ai/api/v1/users/`

### ä¸»è¦æ¥å£

| æ¥å£ | æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|------|------|------|------|
| å‘é€éªŒè¯ç  | POST | `/listenhub/v1/email` | å‘é€ç™»å½•éªŒè¯ç  |
| éªŒè¯ç™»å½• | POST | `/listenhub/v1/auth/signin/email-code` | éªŒè¯ç ç™»å½• |
| è·å–ç§¯åˆ† | GET | `/users/subscription` | è¿”å› `totalAvailableCredits` |
| ç­¾åˆ°çŠ¶æ€ | GET | `/banana/checkin/status` | æ£€æŸ¥ä»Šæ—¥ç­¾åˆ°çŠ¶æ€ |
| æ‰§è¡Œç­¾åˆ° | POST | `/banana/checkin` | ç­¾åˆ°è·å–ç§¯åˆ† |
| ç”Ÿæˆå›¾ç‰‡ | POST | `/banana/images` | æäº¤ç”Ÿæˆä»»åŠ¡ |
| å›¾åº“åˆ—è¡¨ | GET | `/banana/images?page=1&pageSize=16` | è·å–å›¾ç‰‡åˆ—è¡¨ |

### å›¾ç‰‡æ•°æ®ç»“æ„

```json
{
  "id": "692e86767cbb9b7d66eb887d",
  "status": "success",
  "prompt": "a cute cat sitting on a table",
  "imageSize": "2K",
  "aspectRatio": "1:1",
  "isPublic": false,
  "imageUrl": "https://storage.googleapis.com/...?X-Goog-Signature=...",
  "thumbnailUrl": "https://storage.googleapis.com/listenhub-labs-public/...",
  "createdAt": 1764656758137,
  "updatedAt": 1764657050725
}
```

**æ³¨æ„ï¼š**
- `imageUrl` æ˜¯å¸¦ç­¾åçš„åŸå›¾ URLï¼Œæœ‰æ•ˆæœŸçº¦ 1 å°æ—¶
- `thumbnailUrl` æ˜¯å…¬å¼€çš„ç¼©ç•¥å›¾ URLï¼Œæ— éœ€ç­¾å

## ğŸ”§ æ²¹çŒ´è„šæœ¬è¯¦è§£

### æ–‡ä»¶ä½ç½®
`banana-web/token-grabber.user.js`

### å®‰è£…æ–¹æ³•
1. å®‰è£… [Tampermonkey](https://www.tampermonkey.net/) æµè§ˆå™¨æ‰©å±•
2. æ‰“å¼€ `token-grabber.user.js` æ–‡ä»¶
3. Tampermonkey ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶æç¤ºå®‰è£…
4. ç‚¹å‡»ã€Œå®‰è£…ã€æŒ‰é’®

### ä½¿ç”¨æ–¹æ³•
1. è®¿é—® https://listenhub.ai æˆ– https://banana.listenhub.ai
2. å®Œæˆç™»å½•
3. é¡µé¢å³ä¸‹è§’ä¼šå‡ºç° ğŸŒ æ‚¬æµ®æŒ‰é’®
4. ç‚¹å‡»æŒ‰é’®ï¼Œç­‰å¾…åŒæ­¥å®Œæˆ
5. æ‰“å¼€ http://localhost:3000 æŸ¥çœ‹å·²åŒæ­¥çš„è´¦æˆ·

### è„šæœ¬åŠŸèƒ½
| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| Token æŠ“å– | ä» Cookie ä¸­è¯»å– `app_access_token` |
| URL è§£ç  | è‡ªåŠ¨è§£ç  `Bearer%20...` æ ¼å¼çš„ Token |
| ç”¨æˆ·ä¿¡æ¯ | è°ƒç”¨ `/users/me` è·å–é‚®ç®±ã€æ˜µç§° |
| ç§¯åˆ†æŸ¥è¯¢ | è°ƒç”¨ `/users/subscription` è·å–çœŸå®ç§¯åˆ† |
| ç­¾åˆ°çŠ¶æ€ | è°ƒç”¨ `/banana/checkin/status` æ£€æŸ¥ç­¾åˆ° |
| è‡ªåŠ¨æ£€æµ‹ | æ¯ 3 ç§’æ£€æµ‹ç™»å½•çŠ¶æ€å˜åŒ– |
| æ–°ç™»å½•æç¤º | æ£€æµ‹åˆ°æ–° Token æ—¶æŒ‰é’®ä¼šé—ªçƒæç¤º |

### æŠ“å–çš„æ•°æ®
```javascript
{
  email: "user@example.com",     // ç”¨æˆ·é‚®ç®±
  token: "eyJhbGciOiJIUzI1...",  // JWT Tokenï¼ˆçº¯ Tokenï¼Œä¸å« Bearer å‰ç¼€ï¼‰
  cookies: {                     // æ‰€æœ‰ç›¸å…³ Cookie
    "app_access_token": "...",
    "app_refresh_token": "...",
    "NEXT_LOCALE": "zh",
    // ...
  },
  credits: 60,                   // å½“å‰ç§¯åˆ†
  userInfo: {                    // ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
    email: "...",
    nickname: "...",
    avatar: "...",
    // ...
  }
}
```

### æ³¨æ„äº‹é¡¹
- ç¡®ä¿æœ¬åœ°æœåŠ¡ (http://localhost:3000) å·²å¯åŠ¨
- è„šæœ¬ä¼šè‡ªåŠ¨è®°å½•å·²åŒæ­¥çš„ Tokenï¼Œé¿å…é‡å¤åŒæ­¥
- å¦‚æœ Token å¤±æ•ˆï¼Œéœ€è¦é‡æ–°ç™»å½•åå†åŒæ­¥

## ğŸ“ é¡¹ç›®ç»“æ„

```
banana-web/
â”œâ”€â”€ README.md              # å®Œæ•´çš„é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ server.js              # åç«¯æœåŠ¡
â”œâ”€â”€ config.json            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ data.json              # æ•°æ®å­˜å‚¨
â”œâ”€â”€ package.json           # ä¾èµ–é…ç½®
â”œâ”€â”€ token-grabber.user.js  # ğŸ”‘ æ²¹çŒ´è„šæœ¬ï¼ˆToken æŠ“å–å™¨ï¼‰
â””â”€â”€ public/
    â”œâ”€â”€ index.html         # å‰ç«¯é¡µé¢
    â”œâ”€â”€ app.js             # å‰ç«¯é€»è¾‘
    â””â”€â”€ style.css          # æ ·å¼æ–‡ä»¶
```

## âš ï¸ å…è´£å£°æ˜

æœ¬å·¥å…·ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ã€‚ä½¿ç”¨æœ¬å·¥å…·æ—¶è¯·éµå®ˆ Banana Lab / ListenHub çš„æœåŠ¡æ¡æ¬¾ã€‚ä½œè€…ä¸å¯¹ä»»ä½•æ»¥ç”¨è¡Œä¸ºè´Ÿè´£ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License


## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

Made with â¤ï¸ by è‹ç³– ğŸ±